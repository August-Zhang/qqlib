import unittest
from qqlib import hieroglyphy

class TestHieroglyphy(unittest.TestCase):
    def test_decode(self):
        for encrypted, plain in [
            (
                '(+[]+[])+(+!![]+[])+(!+[]+!![]+[])+(!+[]+!![]+!![]+[])'
                '+(!+[]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+[]'
                ')+(!+[]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!'
                '![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+'
                '!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]'
                '+!![]+[])+(+{}+[])[+!![]]+([]+{})[!+[]+!![]]+([]+{})[!'
                '+[]+!![]+!![]+!![]+!![]]+([][[]]+[])[!+[]+!![]]+([][[]'
                ']+[])[!+[]+!![]+!![]]+(![]+[])[+[]]',
                '0123456789abcdef'
            ),
            (
                '(!+[]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!!['
                ']+!![]+[])+(+[]+[])+([][[]]+[])[!+[]+!![]]+(!+[]+!![]+'
                '!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+[])+'
                '([][[]]+[])[!+[]+!![]+!![]]+(![]+[])[+[]]+(![]+[])[+[]'
                ']+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+([]+{})'
                '[!+[]+!![]]+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(['
                ']+{})[!+[]+!![]]+(+{}+[])[+!![]]+([]+{})[!+[]+!![]]+(['
                ']+{})[!+[]+!![]+!![]+!![]+!![]]+(+!![]+[])+([][[]]+[])'
                '[!+[]+!![]]+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+['
                '])+(!+[]+!![]+!![]+!![]+!![]+[])+([]+{})[!+[]+!![]]+(['
                '][[]]+[])[!+[]+!![]]+(!+[]+!![]+!![]+!![]+!![]+!![]+[]'
                ')+(!+[]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+[])+(!+[]+!'
                '![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+'
                '!![]+!![]+!![]+[])+([]+{})[!+[]+!![]+!![]+!![]+!![]]+('
                '!+[]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]'
                '+[])+(![]+[])[+[]]+(![]+[])[+[]]+(+{}+[])[+!![]]+(!+[]'
                '+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!!['
                ']+!![]+!![]+!![]+!![]+!![]+!![]+[])+([]+[][(![]+[])[!+'
                '[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[]'
                ')[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!!['
                ']]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+['
                '])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]'
                '+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!'
                '![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]'
                '+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]'
                ']+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+'
                '!![]+!![]]+(![]+[])[!+[]+!![]]+([]+{})[+!![]]+([]+{})['
                '!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+(!![]+[])[+['
                ']]+([][[]]+[])[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]'
                ']+([][[]]+[])[+!![]])())[+[]]+(!+[]+!![]+!![]+!![]+!!['
                ']+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!!'
                '[]+[])+(!+[]+!![]+!![]+[])+(+!![]+[])+(!+[]+!![]+!![]+'
                '!![]+[])+(+{}+[])[+!![]]+([][[]]+[])[!+[]+!![]]+(!+[]+'
                '!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(+{}+[])[+'
                '!![]]+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!!'
                '[]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+['
                '])+([][[]]+[])[!+[]+!![]+!![]]+(+[]+[])+(!+[]+!![]+!!['
                ']+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!!'
                '[]+!![]+[])+(!+[]+!![]+[])+(!+[]+!![]+!![]+!![]+[])+(!'
                '+[]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(![]+[])[+[]]+(!'
                '+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+'
                '!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]'
                '+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+[])+([]+{})[!'
                '+[]+!![]]+(!+[]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!!['
                ']+!![]+!![]+!![]+!![]+!![]+[])+(![]+[])[+[]]+(!+[]+!!['
                ']+!![]+!![]+!![]+[])+(!+[]+!![]+[])+([]+{})[!+[]+!![]]'
                '+(+[]+[])+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!+[]+!![]'
                '+!![]+!![]+!![]+[])+(!+[]+!![]+[])+(![]+[])[+[]]+(!+[]'
                '+!![]+!![]+!![]+[])+(![]+[])[+[]]+([]+{})[!+[]+!![]+!!'
                '[]+!![]+!![]]+([]+{})[!+[]+!![]]+(!+[]+!![]+!![]+!![]+'
                '[])+([]+{})[!+[]+!![]]+(!+[]+!![]+!![]+!![]+!![]+!![]+'
                '!![]+!![]+!![]+[])+(+{}+[])[+!![]]+(!+[]+!![]+[])+(+!!'
                '[]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!'
                '![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+'
                '!![]+!![]+!![]+!![]+!![]+!![]+[])+([]+{})[!+[]+!![]]+('
                '[]+{})[!+[]+!![]+!![]+!![]+!![]]+(!+[]+!![]+!![]+[])+('
                '[]+{})[!+[]+!![]]+(!+[]+!![]+!![]+!![]+!![]+[])+(!+[]+'
                '!![]+[])+(!+[]+!![]+[])+([]+{})[!+[]+!![]+!![]+!![]+!!'
                '[]]+(+[]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+[])+(+{}+['
                '])[+!![]]+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(![]'
                '+[])[+[]]+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])'
                '+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!+[]+!![]+!![]+!!['
                ']+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+[])+(!+[]+!!'
                '[]+!![]+[])+(+[]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!!'
                '[]+!![]+!![]+[])+(+{}+[])[+!![]]+(![]+[])[+[]]+(!+[]+!'
                '![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+'
                '!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+[])+([]+{})[!+'
                '[]+!![]]+(!+[]+!![]+!![]+[])+(+[]+[])+(+[]+[])+(!+[]+!'
                '![]+!![]+!![]+!![]+!![]+[])+([]+{})[!+[]+!![]]+(!+[]+!'
                '![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+'
                '[])+(!+[]+!![]+!![]+[])+(+{}+[])[+!![]]+(+!![]+[])+(!+'
                '[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(![]+[]'
                ')[+[]]+(!+[]+!![]+!![]+!![]+!![]+[])+([]+{})[!+[]+!![]'
                '+!![]+!![]+!![]]+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!'
                '![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+'
                '[])+(![]+[])[+[]]+([][[]]+[])[!+[]+!![]]+(!+[]+!![]+!!'
                '[]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!'
                '![]+[])+(+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]'
                '+!![]+[])+(+[]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+[])+'
                '(![]+[])[+[]]+([]+{})[!+[]+!![]]+(!+[]+!![]+!![]+!![]+'
                '!![]+!![]+[])+([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{}'
                ')[!+[]+!![]+!![]+!![]+!![]]+(!+[]+!![]+!![]+!![]+!![]+'
                '[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]'
                '+!![]+!![]+!![]+!![]+!![]+!![]+!![]+[])',
                '290d56eff8b7babc1d85bd63477c46ffa89h96314ad9a783e06824'
                '7f9666b49f52b0c52f4fcb4b9a21798bc3b522c06a7f8c83309af9'
                '36b3006b833a19f5c98fd941806fb6cc588'
            ),
        ]:
            self.assertEqual(hieroglyphy.decode(encrypted), plain)
